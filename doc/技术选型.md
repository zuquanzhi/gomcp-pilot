gomcp-pilot 技术选型（精简版）

---
1. 选型原则
- 系统级守护进程，优先标准库、零反射、零魔法。
- 单二进制、低依赖，便于本地分发和跨平台运行。
- 控制力 > 便利性：宁可多写样板，也要掌握 IO 与进程的细节。

---
2. 栈总览
- CLI：spf13/cobra + spf13/viper（约束目录结构、配置覆盖）。
- HTTP/SSE：Go 1.22+ `net/http` 原生 mux（少量 Endpoint，直接用标准库）。
- TUI：charmbracelet/bubbletea + lipgloss（MVU 模式，异步事件友好）。
- 数据：SQLite (mattn/go-sqlite3) + SQLC（编译期类型安全，零反射）。
- 进程编排：os/exec（Stdio 管道直控，跨平台最稳方案）。

---
3. 关键决策与理由
- `net/http`：内建 http.Flusher 支持 SSE；方法路由足够；避免引入 gin/echo 等重量框架。
- Cobra/Viper：行业通用 CLI 规范，天然支持配置覆盖；降低学习成本。
- Bubbletea：MVU 模式天然适配“请求到消息”的事件流；配合 lipgloss 保持现代终端体验。
- SQLite + SQLC：嵌入式存储符合本地工具定位；SQLC 生成零反射代码，性能可预期。
- `os/exec`：唯一需要的编排能力是可靠拉起/销毁子进程并透传管道，标准库已覆盖。

---
4. 边界与弃用
- 不引入 Web MVC 框架、ORM（gin/gorm 等）；避免隐藏状态和反射开销。
- 不依赖外部数据库或 Docker 组件，默认自包含运行。

---
5. 一句话结论
保持极简、可控、可审计：对外用成熟 CLI/TUI 提升体验，对内回到标准库，确保性能和可维护性。
